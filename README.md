# Суворов Роман ИВТ 2.1 СР

## ИСР 1.1 
| Тип данных   | Описание                                                                                      |
|--------------|-----------------------------------------------------------------------------------------------|
| INTEGER      | Хранит целые числа в диапазоне от -2147483648 до 2147483647.                                  |
| DECIMAL      | Позволяет хранить точные числа с фиксированной точностью и масштабом.                         |
| VARCHAR      | Переменная длина строки с максимальной длиной до 65535 символов.                               |
| DATE         | Хранит дату в формате 'YYYY-MM-DD'.                                                           |
| TIMESTAMP    | Хранит дату и время в формате 'YYYY-MM-DD HH:MM:SS'.                                           |
| CHAR         | Строка фиксированной длины до 255 символов.                                                   |
| TEXT         | Хранит текстовые данные переменной длины до 65535 символов.                                    |
| BOOLEAN      | Логический тип данных, может принимать значения TRUE или FALSE.                                |
| FLOAT        | Хранит числа с плавающей точкой одинарной точности.                                           |
| DOUBLE       | Хранит числа с плавающей точкой двойной точности.                                             |
| ENUM         | Перечислимый тип данных, допускающий только одно из заданных значений.                         |
| SET          | Множественный тип данных, допускающий набор заданных значений.                                |

<hr style="border: 10px solid grey;">

## [Самостоятельная работа 1.2](presintations/Суворов%20Роман%20ИВТ%202.1%20бд%20ср%201.2.pptx)

<hr style="border: 10px solid grey;">

## [Самостоятельная работа 1.3](presintations/Суворов%20Роман%20ИВТ%202.1%20бд%20ср%201.3.pptx)

<hr style="border: 10px solid grey;">

## СР 1.4
была развернута база данных mongodb с использованием команды:
docker run -d --name monga-test -e MONGO_INITDB_ROOT_USERNAME=mongoadmin -e MONGO_INITDB_ROOT_PASSWORD=1234 -p 27017:27017 -v mongo_test:/data/db mongo:7.0
![](images/1.png)

2)подключился к базе данных с помощью расширения в vscode
![](images/2.png)

3)заполнение и чтение заполненных данных mongodb 
```python
from pymongo import MongoClient
client = MongoClient('mongodb://mongoadmin:1234@localhost:27017/')
database = client['demo']
collection = database['users']
users = [
    {"name": "Artem", "age": 10},
    {"name": "Sema", "age": 1000}
]
collection.insert_many(users)
result = collection.find()
for document in result:
    print(document)
```

результат:

![](images/4.png)


<hr style="border: 10px solid grey;">

## СР 2.1

1 Иерархическая модель
Предметная область: Организационная структура предприятия.
Описание взаимоотношений объектов:
- Верхний уровень: Корпорация.
- Подуровни: Департаменты, Отделы.
- Нижний уровень: Сотрудники.
![](images/5.png)

2 Сетевая модель
Предметная область: Управление проектами.
Описание взаимоотношений объектов:
- Узлы: Проекты.
- Связи: Задачи, Подзадачи.
- Конечные узлы: Исполнители.
![](images/6.png)

3 Реляционная модель
Предметная область: Управление клиентами.
Описание взаимоотношений объектов:
- Таблицы: Клиенты, Заказы.
- Поля: Имя, Адрес, Телефон.
- Связи: Клиенты и их Заказы.
![](images/7.png)

4 Сущность-связь
Предметная область: База данных студентов.
Описание взаимоотношений объектов:
- Сущности: Студенты, Курсы.
- Связи: Запись на курс.
- Атрибуты: Имя, Фамилия, Номер студенческого билета.
![](images/8.png)

5 Семантическая модель
Предметная область: Электронная коммерция.
Описание взаимоотношений объектов:
- Объекты: Продукты, Категории.
- Свойства: Название, Цена, Описание.
- Отношения: Продукты принадлежат Категориям.
![](images/9.png)

6 Объектно-ориентированная модель
Предметная область: Разработка программного обеспечения.
Описание взаимоотношений объектов:
- Классы: Пользователи, Программы.
- Объекты: Конкретные Пользователи, Конкретные Программы.
- Методы: Вход в систему, Выход из системы.
![](images/10.png)

7 Объектно-реляционная модель
Предметная область: Управление заказами.
Описание взаимоотношений объектов:
- Классы: Заказы, Клиенты.
- Таблицы: Заказы, Клиенты.
- Методы и данные: Создание Заказа, Проверка Статуса Заказа.
![](images/11.png)

8 Полуструктурированная модель
Предметная область: Социальные сети.
Описание взаимоотношений объектов:
- Данные: Профили пользователей, Посты.
- Атрибуты: Имя, Фотография, Комментарии.
- Структура: Дерево, Граф.
![](images/12.png)

<hr style="border: 10px solid grey;">

## [Самостоятельная работа 2.2](presintations/Суворов%20Роман%20ИВТ%202.1%20БД%20лр2.2.2.pptx)

<hr style="border: 10px solid grey;">

## СР 3.2
: Анализ Базы Данных на Избыточность

Избыточность в базах данных может возникать из-за некорректного логического проектирования, что приводит к дублированию информации или чрезмерной нормализации, усложняя запросы. Рассмотрим несколько примеров неправильного логического проектирования:

#### Пример избыточности

1. **Дублирование данных**: Если одинаковая информация хранится в нескольких таблицах, это вызывает избыточность и может привести к проблемам с целостностью данных. Например, информация о клиентах может находиться как в таблице "Клиенты", так и в таблице "Заказы", что усложняет поддержание целостности.

   | ID Клиента | Имя    | Адрес        |
   |------------|--------|--------------|
   | 1          | Иванов | ул. Ленина, 1|
   | 2          | Петров | ул. Карла, 5 |

   | ID Заказа | ID Клиента | Дата Заказа | Имя    | Адрес        |
   |-----------|------------|-------------|--------|--------------|
   | 101       | 1          | 2024-01-01  | Иванов | ул. Ленина, 1|
   | 102       | 2          | 2024-01-02  | Петров | ул. Карла, 5 |

   **Ошибки**: В таблице "Заказы" дублируются данные о клиентах (Имя и Адрес), которые уже содержатся в таблице "Клиенты".

2. **Избыточная нормализация**: Нормализация важна для предотвращения избыточности данных, но излишняя нормализация может усложнить запросы. Например, если информация о продуктах разделена на слишком много связанных таблиц, это может сделать запросы медленными и сложными.

   | ID Продукта | Название   |
   |-------------|------------|
   | 1           | Продукт А  |
   | 2           | Продукт Б  |

   | ID Продукта | Описание   |
   |-------------|------------|
   | 1           | Описание А |
   | 2           | Описание Б |

   | ID Продукта | Цена |
   |-------------|------|
   | 1           | 100  |
   | 2           | 200  |

   **Ошибки**: Информация о продуктах раздроблена на три отдельные таблицы ("Продукты", "Описание Продуктов", "Цены Продуктов"), что усложняет составление запросов.

3. **Ненужные атрибуты**: Включение в таблицы атрибутов, которые не используются в приложении или не требуются для решения бизнес-задач, также является формой избыточности.

   | ID Клиента | Имя    | Адрес        | Возраст | Пол |
   |------------|--------|--------------|---------|-----|
   | 1          | Иванов | ул. Ленина, 1| 30      | М   |
   | 2          | Петров | ул. Карла, 5 | 25      | М   |

   **Ошибки**: Атрибуты "Возраст" и "Пол" могут быть избыточными, если они не используются в приложении или не требуются для бизнес-задач.

4. **Повторение информации в связях**: Когда одна и та же информация хранится в нескольких связанных таблицах, это также приводит к избыточности и усложнению запросов.

   | ID Заказа | ID Клиента | Дата Заказа |
   |-----------|------------|-------------|
   | 101       | 1          | 2024-01-01  |
   | 102       | 2          | 2024-01-02  |

   | ID Заказа | ID Продукта | Количество | Цена | Название   |
   |-----------|-------------|------------|------|------------|
   | 101       | 1           | 2          | 100  | Продукт А  |
   | 101       | 2           | 1          | 200  | Продукт Б  |
   | 102       | 1           | 1          | 100  | Продукт А  |

   **Ошибки**: В таблице "Детали Заказа" дублируются данные о цене и названии продукта, которые уже содержатся в таблице "Продукты".

### Алгоритм устранения недостатков логической структуры базы данных

1. **Анализ структуры базы данных**: Определите таблицы, связи между ними и атрибуты каждой таблицы.
2. **Идентификация избыточности**: Определите дублирование данных, избыточную нормализацию и ненужные атрибуты.
3. **Нормализация**: Примените нормализацию для устранения избыточности и повышения целостности данных. Это может включать объединение таблиц, разделение таблиц и оптимизацию структуры.
4. **Оптимизация запросов**: Пересмотрите запросы к базе данных после нормализации для обеспечения их эффективности и оптимизируй

<hr style="border: 10px solid grey;">


## ИСР 4.1

### Шаг 1: Создание таблицы Customer
```sql
CREATE TABLE Customer (
    customer_num INT PRIMARY KEY,
    customer_name VARCHAR(100) NOT NULL,
    customer_address VARCHAR(255) NOT NULL,
    customer_phone VARCHAR(15) NOT NULL
);
```

### Шаг 2: Создание таблицы Product
```sql
CREATE TABLE Product (
    catalog_num INT PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);
```

### Шаг 3: Создание таблицы Order
```sql
CREATE TABLE CustomerOrder (
    order_num INT PRIMARY KEY,
    customer_num INT NOT NULL,
    order_date DATE NOT NULL,
    FOREIGN KEY (customer_num) REFERENCES Customer(customer_num)
);
```

### Шаг 4: Создание таблицы OrderItem
```sql
CREATE TABLE OrderItem (
    order_num INT NOT NULL,
    catalog_num INT NOT NULL,
    quantity INT NOT NULL,
    PRIMARY KEY (order_num, catalog_num),
    FOREIGN KEY (order_num) REFERENCES CustomerOrder(order_num),
    FOREIGN KEY (catalog_num) REFERENCES Product(catalog_num)
);
```

### Результат:
![](images/13.png)

<hr style="border: 10px solid grey;">

## ВСР 4.2


### Создание Элемент
```sql
CREATE TABLE Элемент (
    ElemID SERIAL PRIMARY KEY,
    ElemName VARCHAR(50) NOT NULL
);
```
![](images/14.png)


### Создание элемент1
```sql 
CREATE TABLE Элемент1 (
    ElemID1 INT,
    ElemID2 INT,
    ElemName VARCHAR(50) NOT NULL,
    PRIMARY KEY (ElemID1, ElemID2)
);
```
![](images/15.png)


### Создание Элементы
```sql
CREATE TABLE Элементы (
    ElementsID SERIAL PRIMARY KEY,
    ElemID INT NOT NULL,
    Comment TEXT,
    FOREIGN KEY (ElemID) REFERENCES Элемент (ElemID)
);
```
![](images/16.png)


### Создание book
```sql
CREATE TABLE Book (
    BookID SERIAL PRIMARY KEY,
    Title VARCHAR(255) NOT NULL,
    AuthorID INT NOT NULL,
    Genre VARCHAR(100),
    UNIQUE (Title),
    FOREIGN KEY (AuthorID) REFERENCES Author(AuthorID)
);
```
![](images/17.png)


### Создание BookStatus
```sql
CREATE TABLE BookStatus (
    StatusID SERIAL PRIMARY KEY,
    StatusName VARCHAR(50) NOT NULL UNIQUE
);
```
![](images/18.png)


### Создание BookInLib 
```sql
CREATE TABLE BookInLib (
    LibraryID INT,
    BookID INT,
    StatusID INT,
    CONSTRAINT pk_LibraryBook PRIMARY KEY (LibraryID, BookID),
    FOREIGN KEY (LibraryID) REFERENCES Library(LibraryID),
    FOREIGN KEY (BookID) REFERENCES Book(BookID),
    FOREIGN KEY (StatusID) REFERENCES BookStatus(StatusID)
);
```
![](images/19.png)


### Создание столбцов в Элемент1
```sql
ALTER TABLE Элемент1
ADD COLUMN info VARCHAR(200);
```
![](images/20.png)


### Добавляется ограничение уникальности
```sql
ALTER TABLE Элемент1
ADD CONSTRAINT un_info UNIQUE(info);
```
![](images/20.png)

### Добавляется столбец в "BookStatus"
```sql
ALTER TABLE BookStatus
ADD COLUMN Comment VARCHAR(200) NOT NULL;
```
![](images/21.png)


### Создание newbook
```sql
CREATE TABLE NewBook (
    BookID INT PRIMARY KEY,
    Title VARCHAR(255) NOT NULL,
    AuthorID INT NOT NULL,
    Genre VARCHAR(100),
    PublishDate DATE
);
```
![](images/22.png)


### Добавление в newbook
```sql
INSERT INTO NewBook (BookID, Title, AuthorID, Genre, PublishDate)
SELECT BookID, Title, AuthorID, Genre, PublishDate
FROM Book
WHERE EXTRACT(YEAR FROM PublishDate) > 2000;
```
![](images/23.png)


### Дроп newbook
```sql
DROP TABLE NewBook;
```
![](images/24.png)


